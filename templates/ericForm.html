{% extends "base.html" %}

{% block css_link %}
<link rel="stylesheet" href="{{ url_for('static', filename='ericstyles.css') }}">
<style>
/* 🔹 Move body background here so Flask can inject the image */
body {
  background: url('{{ game_bg_url }}') no-repeat center center fixed;
  background-size: cover;
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  color: white;
  min-height: 200vh; /* allows long scrolling page */
}
</style>
{% endblock %}

{% block title %}Comments - {{ current_game }}{% endblock %}

{% block content %}
<!-- 🔹 Wrapper for full-page layout -->
<div class="page-wrapper">

  <!-- Comment Form (left side) -->
  <div class="comment-form-box">
    <h2>Leave a Comment for {{ current_game }}</h2>

    {% if error %}
      <p class="error">{{ error }}</p>
    {% endif %}

    <form action="" method="post">
      <label>Name:</label>
      <input type="text" name="name" placeholder="Your name...">

      <label>Rating:</label>
      <div class="star-rating">
        {% for i in range(5, 0, -1) %}
          <input type="radio" id="star{{ i }}" name="rating" value="{{ i }}">
          <label for="star{{ i }}">★</label>
        {% endfor %}
      </div>

      <label>Comment:</label>
      <textarea name="comments" placeholder="Write your comment..."></textarea>

      <button type="submit">Submit</button>
    </form>
  </div>

  <!-- Comment Display Section -->
  <div class="comments-display">
    {% if database %}
      <ul>
        {% for c in database %}
          <li class="fade-in">
            <strong>{{ c.user.name if c.user else "Anonymous" }}</strong> —
            {% for i in range(c.rating) %}★{% endfor %}
            {% for i in range(5 - c.rating) %}☆{% endfor %}
            <p>{{ c.comment }}</p>
            <small>
              🆔 {{ c.user.user_uuid if c.user else 'Guest' }} |
              ⏰ {{ c.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}
            </small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="no-comments">No comments yet. Be the first to share!</p>
    {% endif %}
  </div>

</div> <!-- end page-wrapper -->
{% endblock %}






